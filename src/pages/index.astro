---
import BaseLayout from "../layouts/base.astro";
import Tag from "../components/tag.astro";
import meImage from "../images/yo.jpg";
import { Picture } from "astro:assets";
import { getCollection } from "astro:content";

const posts = await getCollection("posts");

const formatter = new Intl.DateTimeFormat("en-US", {
	year: "numeric",
	month: "short",
});
---

<BaseLayout>
	<header class="pt-8">
		<div
			class="flex flex-col-reverse sm:flex-row gap-8 justify-between w-full sm:items-center"
		>
			<div>
				<h1 class="font-extrabold font-robot tracking-tight text-4xl">
					Andrés Rodríguez
				</h1>
				<h2 class="text-muted-foreground font-robot text-2xl mt-1">
					Computer Scientist
				</h2>
			</div>
			<Picture
				src={meImage}
				alt="Andrés Rodríguez"
				formats={["avif", "webp"]}
				width={300}
				class="mx-auto shadow border-4 object-cover w-40 h-40"
				loading="eager"
			/>
		</div>
	</header>
	<main class="pt-12 space-y-8">
		<section class="prose prose-lg">
			<p>
				Hola! My name is Andrés. I'm a Software Engineer primarily focused on
				full-stack web development. I'm currently working as the Tech Lead of <a
					href="https://coolfiresolutions.com"
					target="_blank"
					rel="noopener noreferrer">Coolfire Solutions</a
				>.
			</p>
		</section>
		<section>
			<ul class="divide-y divide-black">
				{
					posts.map((post) => (
						<li class="border-2 shadow p-4">
							<div class="flex flex-col sm:flex-row sm:items-center gap-2 font-robot">
								<a
									href={`/posts/${post.slug}`}
									class="font-semibold tracking-tight text-xl underline-offset-2 hover:underline flex-1 decoration-2 decoration-hot-pink"
								>
									{post.data.title}
								</a>
								<time
									datetime={post.data.publishedAt.toDateString()}
									class="font-semibold text-gray-600"
								>
									{formatter.format(post.data.publishedAt)}
								</time>
							</div>
							<p class="pt-3">{post.data.description}</p>
							<ul class="flex gap-2 pt-3">
								{post.data.tags.map((tag) => (
									<li>
										<Tag tag={tag} />
									</li>
								))}
							</ul>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</BaseLayout>
